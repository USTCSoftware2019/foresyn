{% extends 'base.html' %}

{% load cobra_wrapper_tags %}

{% block title %}FVA Result of {{ object }}{% endblock title %}

{% block content %}
    <table>
        <tr>
            <td>description</td>
            <td>{{ object.desc }}</td>
        </tr>
        <tr>
            <td>start_time</td>
            <td>{{ object.start_time }}</td>
        </tr>
        <tr>
            <td>model</td>
            <td><a href="{% url 'cobra_wrapper:cobramodel_detail' model_pk %}">{{ object.model }}</a></td>
        </tr>
    </table>

    <table>
        <tr>
            <th>argument name</th>
            <th>argument value</th>
        </tr>
        <tr>
            <td>reaction_list</td>
            <td>
                [
                {% for reaction in object.reaction_list|split_with_comma %}
                    {% if not forloop.counter == 1 %},{% endif %}
                    {{ reaction }}
                {% endfor %}
                ]
            </td>
        </tr>
        <tr>
            <td>loopless</td>
            <td>{{ object.loopless }}</td>
        </tr>
        <tr>
            <td>fraction_of_optimum</td>
            <td>{{ object.fraction_of_optimum }}</td>
        </tr>
        <tr>
            <td>pfba_factor</td>
            <td>{{ object.pfba_factor|default_if_none:"None" }}</td>
        </tr>
    </table>

    <p>Status: {{ object|check_result_status }}</p>

    {% if result %}
        {% if result.ok %}
            <table>
                <tr>
                    <th>name</th>
                    <th>maximum</th>
                    <th>minimum</th>
                </tr>
                {% for name in result.maximum.keys %}
                    <tr>
                        <td>{{ name }}</td>
                        <td>{{ result.maximum|access_dict:name }}</td>
                        <td>{{ result.minimum|access_dict:name }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <div>{{ result }}</div>
        {% endif %}
    {% endif %}

    <div>
        {% for fva in latest_fva_list %}
            {{ fva }}
        {% endfor %}
    </div>

    <a href="{% url 'cobra_wrapper:cobrafva_confirm_delete' model_pk object.pk %}">Delete</a>
    <a href="{% url 'cobra_wrapper:cobrafva_list' model_pk %}">Return</a>
{% endblock content %}