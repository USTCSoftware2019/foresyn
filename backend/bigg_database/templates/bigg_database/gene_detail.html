{% extends 'base.html' %}

{% block title %}
Gene: {{ gene.bigg_id }}
{% endblock %}

{% block content %}

<h1>Gene: {{ gene.bigg_id }}</h1>

<h4>Descriptive name</h4>
<p>{{ gene.name }}</p>

<h4>Position</h4>
<p>{{ gene.leftpos }} ~ {{ gene.rightpos }}</p>

<h4>Strand</h4>
<p>{{ gene.strand }}</p>

<h4>Chromosome</h4>
<p>{{ gene.chromosome_ncbi_accession }}</p>

<h4>DNA Sequence</h4>
<p>{{ gene.dna_sequence }}</p>

<h4>Protein Sequence</h4>
<p>{{ gene.protein_sequence }}</p>

{% if gene.database_links %}
<h4>External database links</h4>
{% include 'bigg_database/db_links.html' with db_links=gene.database_links only %}
{% endif %}

<h4><a href="{% url 'bigg_database:gene_from_models' gene.id %}">
    Models Containing {{ gene.bigg_id }}</a></h4>
<table>
    <thead>
    <tr>
        <th>BiGG ID</th>
        <th>Compartments</th>
    </tr>
    </thead>
    <tbody>
    {% for model in gene.models.all %}
    <!-- Make row clickable? Or move link to bigg_id? -->
    <tr href="{% url 'bigg_database:model_detail' model.id %}">
        <td>{{ model.bigg_id }}</td>
        <td>{{ model.compartments|join:', ' }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<h4><a href="{% url 'bigg_database:gene_from_reactions' gene.id %}">
    Reactions Containing {{ gene.bigg_id }}</a></h4>
<table>
    <thead>
    <tr>
        <th>BiGG ID</th>
        <th>Name</th>
        <th>Gene Reaction Rule</th>
    </tr>
    </thead>
    <tbody>
    {% for reaction in gene.reactiongene_set.all %}
    <tr href="{% url 'bigg_database:reaction_detail' reaction.reaction.id %}">
        <td>{{ reaction.reaction.bigg_id }}</td>
        <td>{{ reaction.reaction.name }}</td>
        <td>{{ reaction.gene_reaction_rule }}</td>
    </tr>
    </tbody>
    {% endfor %}
</table>

{% endblock %}
